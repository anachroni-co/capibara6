<!DOCTYPE html>
<html lang="es" data-lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Capibara6 - Chat con el modelo h√≠brido Transformer-Mamba">
    <title>Chat capibara6 - IA Conversacional | Anachroni</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="chat-styles-neuromorphic-dark-v2.css">
    <script src="config.js?v=20251202"></script>
    <script>
        // Asegurar que la configuraci√≥n se aplique antes de que otros scripts la usen
        if (typeof CHATBOT_CONFIG !== 'undefined') {
            console.log('‚úÖ Configuraci√≥n de CHATBOT cargada:', {
                backendUrl: CHATBOT_CONFIG.BACKEND_URL,
                endpoints: CHATBOT_CONFIG.ENDPOINTS,
                services: CHATBOT_CONFIG.SERVICES
            });
        }
    </script>
</head>
<body>
    <div class="chat-page-wrapper">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <div class="logo-icon">
                        <i data-lucide="bot" style="width: 24px; height: 24px;"></i>
                    </div>
                    <h2 class="logo-text">capibara6</h2>
                </div>
                <button class="sidebar-toggle-btn" id="sidebar-toggle" aria-label="Toggle Sidebar">
                    <i data-lucide="panel-left-close" style="width: 20px; height: 20px;"></i>
                </button>
            </div>

            <!-- Actions Section -->
            <div class="sidebar-section">
                <button class="btn-new-chat" id="new-chat-btn">
                    <i data-lucide="plus" style="width: 18px; height: 18px;"></i>
                    <span>Nuevo Chat</span>
                </button>
                <div class="sidebar-actions">
                    <button class="btn-sidebar-action" id="create-project-btn" title="Crear Proyecto">
                        <i data-lucide="folder-plus" style="width: 18px; height: 18px;"></i>
                        <span>Crear Proyecto</span>
                    </button>
                </div>
            </div>

            <!-- Chat History -->
            <div class="sidebar-section">
                <div class="sidebar-section-header">
                    <span class="section-title">Conversaciones</span>
                    <button class="icon-btn-sm" id="refresh-chats-btn" title="Actualizar">
                        <i data-lucide="refresh-cw" style="width: 16px; height: 16px;"></i>
                    </button>
                </div>
                <div class="chat-list" id="chat-list">
                    <!-- Los chats se cargar√°n din√°micamente -->
                </div>
            </div>

            <!-- Agents Section -->
            <div class="sidebar-section">
                <div class="sidebar-section-header">
                    <span class="section-title">Agentes</span>
                    <button class="icon-btn-sm" id="create-agent-btn" title="Crear Agente">
                        <i data-lucide="wand-2" style="width: 16px; height: 16px;"></i>
                    </button>
                </div>
                <div class="agents-list" id="agents-list">
                    <!-- Los agentes se cargar√°n din√°micamente -->
                </div>
            </div>

            <!-- Widget N8n -->
            <div class="sidebar-section">
                <div class="sidebar-section-header">
                    <span class="section-title">Workflows</span>
                    <button class="icon-btn-sm" id="n8n-dashboard-btn" title="Abrir Dashboard N8n">
                        <i data-lucide="external-link" style="width: 16px; height: 16px;"></i>
                    </button>
                </div>
                <div class="n8n-widget" id="n8n-widget">
                    <div class="n8n-status" id="n8n-status">
                        <span class="status-dot"></span>
                        <span>Cargando...</span>
                    </div>
                    <div class="n8n-workflows-list" id="n8n-workflows-list">
                        <!-- Workflows activos se cargar√°n aqu√≠ -->
                    </div>
                </div>
            </div>

            <!-- RAG Section -->
            <div class="sidebar-section">
                <div class="sidebar-section-header">
                    <span class="section-title">RAG</span>
                    <button class="icon-btn-sm" id="rag-search-btn-sidebar" title="Buscar en RAG">
                        <i data-lucide="search" style="width: 16px; height: 16px;"></i>
                    </button>
                </div>
                <div class="rag-status" id="rag-status">
                    <span class="status-dot"></span>
                    <span>RAG Listo</span>
                </div>
            </div>

            <!-- TTS Section -->
            <div class="sidebar-section">
                <div class="sidebar-section-header">
                    <span class="section-title">TTS</span>
                    <button class="icon-btn-sm" id="tts-controls-toggle" title="Controles TTS">
                        <i data-lucide="volume-2" style="width: 16px; height: 16px;"></i>
                    </button>
                </div>
                <div class="tts-controls" id="tts-controls-sidebar">
                    <div class="tts-status" id="tts-status">
                        <span class="status-dot"></span>
                        <span>TTS Listo</span>
                    </div>
                    <div class="tts-controls-actions">
                        <button class="btn-icon-sm" id="tts-play-btn-sidebar" title="Reproducir">
                            <i data-lucide="play" style="width: 16px; height: 16px;"></i>
                        </button>
                        <button class="btn-icon-sm" id="tts-stop-btn-sidebar" title="Detener">
                            <i data-lucide="square" style="width: 16px; height: 16px;"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- E2B Service Section -->
            <div class="sidebar-section">
                <div class="sidebar-section-header">
                    <span class="section-title">E2B</span>
                    <button class="icon-btn-sm" id="e2b-status-btn" title="Estado E2B">
                        <i data-lucide="cpu" style="width: 16px; height: 16px;"></i>
                    </button>
                </div>
                <div class="e2b-status" id="e2b-status">
                    <span class="status-dot"></span>
                    <span>E2B Inactivo</span>
                </div>
            </div>

            <!-- User Profile -->
            <div class="sidebar-footer">
                <div class="user-profile" id="user-profile">
                    <div class="user-avatar">
                        <i data-lucide="user" style="width: 20px; height: 20px;"></i>
                    </div>
                    <div class="user-info">
                        <div class="user-name" id="user-name">Usuario</div>
                        <div class="user-email" id="user-email">usuario@example.com</div>
                    </div>
                    <button class="icon-btn-sm" id="profile-menu-btn" title="Men√∫ de perfil">
                        <i data-lucide="more-vertical" style="width: 18px; height: 18px;"></i>
                    </button>
                </div>
            </div>

            <!-- Profile Menu Dropdown -->
            <div class="profile-menu" id="profile-menu">
                <button class="profile-menu-item" id="profile-account-btn">
                    <i data-lucide="user-circle" style="width: 18px; height: 18px;"></i>
                    <span>Mi Cuenta</span>
                </button>
                <button class="profile-menu-item" id="profile-settings-btn">
                    <i data-lucide="settings" style="width: 18px; height: 18px;"></i>
                    <span>Configuraci√≥n</span>
                </button>
                <div class="profile-menu-divider"></div>
                <button class="profile-menu-item" id="profile-theme-btn">
                    <i data-lucide="palette" style="width: 18px; height: 18px;"></i>
                    <span>Tema</span>
                </button>
                <button class="profile-menu-item" id="profile-help-btn">
                    <i data-lucide="help-circle" style="width: 18px; height: 18px;"></i>
                    <span>Ayuda</span>
                </button>
                <div class="profile-menu-divider"></div>
                <button class="profile-menu-item text-danger" id="profile-logout-btn">
                    <i data-lucide="log-out" style="width: 18px; height: 18px;"></i>
                    <span>Cerrar Sesi√≥n</span>
                </button>
            </div>
        </aside>

        <!-- Sidebar Overlay (Mobile) -->
        <div class="sidebar-overlay" id="sidebar-overlay"></div>

        <!-- Panel RAG (colapsable) -->
        <aside class="rag-panel" id="rag-panel">
            <div class="rag-panel-header">
                <h3>üîç B√∫squeda RAG</h3>
                <button class="btn-icon" id="rag-panel-close">
                    <i data-lucide="x" style="width: 18px; height: 18px;"></i>
                </button>
            </div>
            <div class="rag-panel-content">
                <div class="rag-search-box">
                    <input type="text" id="rag-search-input" placeholder="Buscar en conocimiento..." class="rag-search-input">
                    <button id="rag-search-btn" class="rag-search-btn">
                        <i data-lucide="search" style="width: 18px; height: 18px;"></i>
                    </button>
                </div>
                <div class="rag-search-options">
                    <label>
                        <input type="radio" name="rag-search-type" value="rag" checked>
                        RAG Completo
                    </label>
                    <label>
                        <input type="radio" name="rag-search-type" value="semantic">
                        Sem√°ntica
                    </label>
                    <label>
                        <input type="radio" name="rag-search-type" value="all">
                        Todas
                    </label>
                </div>
                <div class="rag-results" id="rag-results">
                    <div class="rag-empty-state">
                        <i data-lucide="search" style="width: 48px; height: 48px; opacity: 0.3;"></i>
                        <p>Realiza una b√∫squeda para ver resultados</p>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="chat-main-content">
            <!-- Header -->
            <header class="chat-header">
                <div class="chat-header-left">
                    <button class="btn-icon" id="sidebar-toggle-mobile" aria-label="Toggle Sidebar">
                        <i data-lucide="menu" style="width: 20px; height: 20px;"></i>
                    </button>
                    <div class="chat-header-title">
                        <h1 class="chat-title">capibara6</h1>
                        <div class="chat-status">
                            <span class="status-indicator" id="status-indicator"></span>
                            <span id="status-text">Conectando...</span>
                            <!-- Indicador MCP -->
                            <span class="mcp-indicator" id="mcp-indicator" title="MCP Contexto Inteligente" style="display: none;">
                                <i data-lucide="brain" style="width: 16px; height: 16px;"></i>
                                <span id="mcp-status-text">MCP</span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="chat-header-actions">
                    <!-- Controles TTS -->
                    <div class="tts-controls" id="tts-controls" style="display: none;">
                        <button class="btn-icon" id="tts-play-btn" title="Reproducir voz">
                            <i data-lucide="play" style="width: 18px; height: 18px;"></i>
                        </button>
                        <button class="btn-icon" id="tts-pause-btn" title="Pausar" style="display: none;">
                            <i data-lucide="pause" style="width: 18px; height: 18px;"></i>
                        </button>
                        <button class="btn-icon" id="tts-stop-btn" title="Detener" style="display: none;">
                            <i data-lucide="square" style="width: 18px; height: 18px;"></i>
                        </button>
                        <input type="range" id="tts-speed" min="0.5" max="2" step="0.1" value="1" 
                               title="Velocidad" class="tts-speed-slider">
                        <span class="tts-speed-value" id="tts-speed-value">1.0x</span>
                    </div>
                    <button class="btn-icon" id="clear-chat-btn" title="Limpiar conversaci√≥n">
                        <i data-lucide="trash-2" style="width: 20px; height: 20px;"></i>
                    </button>
                    <a href="index.html" class="btn-icon" title="Volver al inicio">
                        <i data-lucide="home" style="width: 20px; height: 20px;"></i>
                    </a>
                </div>
            </header>

            <!-- Chat Messages -->
            <div class="chat-messages-container" id="chat-messages">
                <div class="chat-message bot-message">
                    <div class="message-avatar">
                        <div class="avatar-gradient">
                            <i data-lucide="bot" style="width: 24px; height: 24px;"></i>
                        </div>
                    </div>
                    <div class="message-content">
                        <div class="message-text">
                            <p>¬°Hola! Soy capibara6, un modelo de IA h√≠brido Transformer-Mamba. ¬øEn qu√© puedo ayudarte hoy?</p>
                        </div>
                        <div class="message-time" id="welcome-time"></div>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="chat-input-container">
                <div class="chat-input-wrapper">
                    <div class="input-actions">
                        <button class="input-action-btn" id="attach-btn" title="Adjuntar archivo">
                            <i data-lucide="paperclip" style="width: 20px; height: 20px;"></i>
                        </button>
                        <input type="file" id="file-upload-input" style="display: none;" multiple>
                    </div>
                    <textarea
                        id="chat-input"
                        class="chat-input"
                        placeholder="Escribe tu mensaje aqu√≠... (Shift+Enter para nueva l√≠nea)"
                        rows="1"
                        autocomplete="off"
                    ></textarea>
                    <div class="input-actions">
                        <button class="input-action-btn" id="voice-btn" title="Mensaje de voz">
                            <i data-lucide="mic" style="width: 20px; height: 20px;"></i>
                        </button>
                    </div>
                </div>
                <button id="chat-send-btn" class="chat-send-btn">
                    <span>Enviar</span>
                    <i data-lucide="send" style="width: 20px; height: 20px;"></i>
                </button>
            </div>
        </div>

        <!-- Create Project Modal -->
        <div class="modal-overlay" id="create-project-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Crear Nuevo Proyecto</h2>
                    <button class="modal-close" id="create-project-modal-close">
                        <i data-lucide="x" style="width: 24px; height: 24px;"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="project-name">Nombre del Proyecto</label>
                        <input type="text" id="project-name" class="form-input" placeholder="Mi Proyecto" required>
                    </div>
                    <div class="form-group">
                        <label for="project-description">Descripci√≥n (opcional)</label>
                        <textarea id="project-description" class="form-textarea" rows="3" placeholder="Describe tu proyecto..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="project-include-current-chat">
                            Incluir chat actual en el proyecto
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" id="create-project-cancel-btn">Cancelar</button>
                    <button class="btn-primary" id="create-project-submit-btn">Crear Proyecto</button>
                </div>
            </div>
        </div>

        <!-- Select Project Modal (Simple) -->
        <div class="modal-overlay" id="select-project-modal">
            <div class="modal-content modal-small">
                <div class="modal-header">
                    <h2>A√±adir a Proyecto</h2>
                    <button class="modal-close" id="select-project-modal-close">
                        <i data-lucide="x" style="width: 24px; height: 24px;"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <p class="modal-description">Selecciona un proyecto:</p>
                    <div class="projects-list" id="projects-list">
                        <!-- Los proyectos se cargar√°n din√°micamente -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" id="select-project-cancel-btn">Cancelar</button>
                </div>
            </div>
        </div>

        <!-- Select Chat to Merge Modal (Simple) -->
        <div class="modal-overlay" id="select-chat-merge-modal">
            <div class="modal-content modal-small">
                <div class="modal-header">
                    <h2>Unir con otro Chat</h2>
                    <button class="modal-close" id="select-chat-merge-modal-close">
                        <i data-lucide="x" style="width: 24px; height: 24px;"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <p class="modal-description">Selecciona el chat con el que unir:</p>
                    <div class="chats-selection-list" id="chats-merge-list">
                        <!-- Los chats se cargar√°n din√°micamente -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" id="select-chat-merge-cancel-btn">Cancelar</button>
                </div>
            </div>
        </div>

        <!-- Account Modal -->
        <div class="modal-overlay" id="account-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Mi Cuenta</h2>
                    <button class="modal-close" id="account-modal-close">
                        <i data-lucide="x" style="width: 24px; height: 24px;"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Tabs de navegaci√≥n -->
                    <div class="account-tabs">
                        <button class="account-tab active" data-tab="profile">
                            <i data-lucide="user" style="width: 18px; height: 18px;"></i>
                            Perfil
                        </button>
                        <button class="account-tab" data-tab="digital-twin">
                            <i data-lucide="sparkles" style="width: 18px; height: 18px;"></i>
                            Gemelo Digital
                        </button>
                    </div>

                    <!-- Tab: Perfil -->
                    <div class="account-tab-content active" id="tab-profile">
                        <div class="account-section">
                            <div class="account-avatar-large">
                                <div class="user-avatar-large">
                                    <i data-lucide="user" style="width: 48px; height: 48px;"></i>
                                </div>
                                <button class="btn-change-avatar">Cambiar foto</button>
                            </div>
                            <div class="form-group">
                                <label for="account-name">Nombre</label>
                                <input type="text" id="account-name" class="form-input" value="Usuario">
                            </div>
                            <div class="form-group">
                                <label for="account-email">Email</label>
                                <input type="email" id="account-email" class="form-input" value="usuario@example.com">
                            </div>
                            <div class="form-group">
                                <label for="account-company">Empresa (opcional)</label>
                                <input type="text" id="account-company" class="form-input" placeholder="Nombre de la empresa">
                            </div>
                        </div>
                        <div class="settings-section">
                            <h3>Seguridad</h3>
                            <button class="btn-secondary btn-full" id="change-password-btn">
                                <i data-lucide="lock" style="width: 18px; height: 18px;"></i>
                                Cambiar Contrase√±a
                            </button>
                        </div>
                    </div>

                    <!-- Tab: Gemelo Digital -->
                    <div class="account-tab-content" id="tab-digital-twin">
                        <div class="digital-twin-section">
                            <div class="digital-twin-header">
                                <div class="digital-twin-info">
                                    <h3>Gemelo Digital</h3>
                                    <p class="digital-twin-description">Importa tus datos de redes sociales para crear un gemelo digital que aprenda tu estilo de escritura y personalidad.</p>
                                </div>
                                <div class="digital-twin-status" id="digital-twin-status">
                                    <span class="status-badge" id="twin-status-badge">No iniciado</span>
                                </div>
                            </div>

                            <!-- Progreso del gemelo -->
                            <div class="twin-progress-section" id="twin-progress-section" style="display: none;">
                                <div class="progress-header">
                                    <span>Progreso de creaci√≥n</span>
                                    <span class="progress-percentage" id="twin-progress-percentage">0%</span>
                                </div>
                                <div class="progress-bar-container">
                                    <div class="progress-bar" id="twin-progress-bar"></div>
                                </div>
                                <div class="progress-steps" id="twin-progress-steps">
                                    <!-- Pasos se a√±adir√°n din√°micamente -->
                                </div>
                            </div>

                            <!-- Importadores de redes sociales -->
                            <div class="social-importers">
                                <h4>Importar Datos</h4>
                                <div class="social-cards-grid">
                                    <!-- Twitter/X -->
                                    <div class="social-card" data-platform="twitter">
                                        <div class="social-card-header">
                                            <div class="social-icon twitter">
                                                <i data-lucide="twitter" style="width: 24px; height: 24px;"></i>
                                            </div>
                                            <div class="social-card-info">
                                                <h5>Twitter / X</h5>
                                                <span class="social-status" id="twitter-status">No importado</span>
                                            </div>
                                        </div>
                                        <p class="social-card-desc">Tweets, respuestas y bio</p>
                                        <div class="social-card-actions">
                                            <button class="btn-social-import" data-platform="twitter">
                                                <i data-lucide="upload" style="width: 16px; height: 16px;"></i>
                                                Importar
                                            </button>
                                            <input type="file" id="twitter-file-input" accept=".json,.csv" style="display: none;">
                                        </div>
                                    </div>

                                    <!-- LinkedIn -->
                                    <div class="social-card" data-platform="linkedin">
                                        <div class="social-card-header">
                                            <div class="social-icon linkedin">
                                                <i data-lucide="linkedin" style="width: 24px; height: 24px;"></i>
                                            </div>
                                            <div class="social-card-info">
                                                <h5>LinkedIn</h5>
                                                <span class="social-status" id="linkedin-status">No importado</span>
                                            </div>
                                        </div>
                                        <p class="social-card-desc">Posts, art√≠culos y perfil profesional</p>
                                        <div class="social-card-actions">
                                            <button class="btn-social-import" data-platform="linkedin">
                                                <i data-lucide="upload" style="width: 16px; height: 16px;"></i>
                                                Importar
                                            </button>
                                            <input type="file" id="linkedin-file-input" accept=".json,.csv" style="display: none;">
                                        </div>
                                    </div>

                                    <!-- Instagram -->
                                    <div class="social-card" data-platform="instagram">
                                        <div class="social-card-header">
                                            <div class="social-icon instagram">
                                                <i data-lucide="instagram" style="width: 24px; height: 24px;"></i>
                                            </div>
                                            <div class="social-card-info">
                                                <h5>Instagram</h5>
                                                <span class="social-status" id="instagram-status">No importado</span>
                                            </div>
                                        </div>
                                        <p class="social-card-desc">Captions de posts y comentarios</p>
                                        <div class="social-card-actions">
                                            <button class="btn-social-import" data-platform="instagram">
                                                <i data-lucide="upload" style="width: 16px; height: 16px;"></i>
                                                Importar
                                            </button>
                                            <input type="file" id="instagram-file-input" accept=".json,.csv" style="display: none;">
                                        </div>
                                    </div>

                                    <!-- GitHub -->
                                    <div class="social-card" data-platform="github">
                                        <div class="social-card-header">
                                            <div class="social-icon github">
                                                <i data-lucide="github" style="width: 24px; height: 24px;"></i>
                                            </div>
                                            <div class="social-card-info">
                                                <h5>GitHub</h5>
                                                <span class="social-status" id="github-status">No importado</span>
                                            </div>
                                        </div>
                                        <p class="social-card-desc">Repositorios, commits e issues</p>
                                        <div class="social-card-actions">
                                            <button class="btn-social-import" data-platform="github">
                                                <i data-lucide="upload" style="width: 16px; height: 16px;"></i>
                                                Importar
                                            </button>
                                            <input type="file" id="github-file-input" accept=".json,.csv" style="display: none;">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Perfil del Gemelo Digital -->
                            <div class="twin-profile-section" id="twin-profile-section" style="display: none;">
                                <h4>Perfil Generado</h4>
                                <div class="twin-profile-card">
                                    <div class="twin-profile-header">
                                        <div class="twin-avatar">
                                            <i data-lucide="sparkles" style="width: 32px; height: 32px;"></i>
                                        </div>
                                        <div class="twin-info">
                                            <h5 id="twin-name">Mi Gemelo Digital</h5>
                                            <span class="twin-date" id="twin-created-date">Creado el --</span>
                                        </div>
                                    </div>
                                    <div class="twin-stats">
                                        <div class="twin-stat">
                                            <span class="stat-value" id="twin-messages-count">0</span>
                                            <span class="stat-label">Mensajes analizados</span>
                                        </div>
                                        <div class="twin-stat">
                                            <span class="stat-value" id="twin-platforms-count">0</span>
                                            <span class="stat-label">Plataformas</span>
                                        </div>
                                    </div>
                                    <div class="twin-personality" id="twin-personality">
                                        <!-- An√°lisis de personalidad se mostrar√° aqu√≠ -->
                                    </div>
                                </div>
                            </div>

                            <!-- Bot√≥n para generar gemelo -->
                            <div class="twin-actions">
                                <button class="btn-primary btn-full" id="generate-twin-btn" disabled>
                                    <i data-lucide="sparkles" style="width: 18px; height: 18px;"></i>
                                    Generar Gemelo Digital
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" id="account-cancel-btn">Cancelar</button>
                    <button class="btn-primary" id="account-save-btn">Guardar Cambios</button>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div class="modal-overlay" id="settings-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Configuraci√≥n</h2>
                    <button class="modal-close" id="settings-modal-close">
                        <i data-lucide="x" style="width: 24px; height: 24px;"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="settings-section">
                        <h3>Modelo</h3>
                        <div class="setting-item">
                            <label>Temperatura</label>
                            <input type="range" min="0" max="2" step="0.1" value="0.7" id="temperature-setting">
                            <span class="setting-value" id="temperature-value">0.7</span>
                        </div>
                        <div class="setting-item">
                            <label>Max Tokens</label>
                            <input type="number" min="100" max="4000" value="2000" id="max-tokens-setting">
                        </div>
                    </div>
                    <div class="settings-section">
                        <h3>Interfaz</h3>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="sound-notifications" checked>
                                Notificaciones de sonido
                            </label>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="auto-scroll" checked>
                                Auto-scroll
                            </label>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" id="settings-reset-btn">Restablecer</button>
                    <button class="btn-primary" id="settings-save-btn">Guardar</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="config.js?v=20251202"></script>
    <!-- Servicios de integraci√≥n -->
    <script src="tts-integration.js"></script>
    <script src="smart-mcp-integration.js"></script>
    <script src="rag-api-client.js"></script>
    <script src="n8n-manager.js"></script>
    <script src="model-visualization.js"></script>
    <script src="entropy-monitor.js"></script>
    <script src="chat-page.js?v=20251202"></script>
    <script>
        // Inicializar iconos de Lucide
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
        
        // Establecer hora del mensaje de bienvenida
        document.getElementById('welcome-time').textContent = new Date().toLocaleTimeString('es-ES', { 
            hour: '2-digit', 
            minute: '2-digit' 
        });
    </script>
</body>
</html>
